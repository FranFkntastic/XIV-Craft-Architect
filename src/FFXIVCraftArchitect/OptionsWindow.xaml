<Window x:Class="FFXIVCraftArchitect.OptionsWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:ui="http://schemas.lepo.co/wpfui/2022/xaml"
        xmlns:helpers="clr-namespace:FFXIVCraftArchitect.Helpers"
        Title="Options"
        Width="600"
        Height="500"
        WindowStartupLocation="CenterOwner"
        Background="#1e1e1e"
        ResizeMode="NoResize">

    <Grid Margin="16">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto" />
            <RowDefinition Height="*" />
            <RowDefinition Height="Auto" />
        </Grid.RowDefinitions>

        <!-- Header -->
        <TextBlock Grid.Row="0"
                   Text="Settings"
                   FontSize="20"
                   FontWeight="SemiBold"
                   Margin="0,0,0,16"
                   Foreground="#d4af37"/>

        <!-- Settings Tabs -->
        <ui:TabView Grid.Row="1" 
                    Background="#252525"
                    Padding="8">
            
            <!-- UI Tab -->
            <ui:TabViewItem Header="Appearance">
                <ScrollViewer VerticalScrollBarVisibility="Auto">
                    <StackPanel Margin="8">
                        <TextBlock Text="Accent Color"
                                   FontWeight="SemiBold"
                                   Margin="0,8,0,4"
                                   Foreground="#cccccc"/>
                        <TextBlock Text="Choose your accent color (hex format like #d4af37)"
                                   FontSize="11"
                                   Foreground="#888888"
                                   Margin="0,0,0,8"/>
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*" />
                                <ColumnDefinition Width="8" />
                                <ColumnDefinition Width="Auto" />
                            </Grid.ColumnDefinitions>
                            <TextBox x:Name="AccentColorTextBox"
                                     Grid.Column="0"
                                     Text="#d4af37"
                                     MaxLength="7"/>
                            <Border Grid.Column="2"
                                    x:Name="AccentColorPreview"
                                    Width="32"
                                    Height="32"
                                    Background="#d4af37"
                                    CornerRadius="4"
                                    BorderBrush="#555555"
                                    BorderThickness="1"/>
                        </Grid>

                        <TextBlock Text="Preset Colors"
                                   FontSize="11"
                                   Foreground="#888888"
                                   Margin="0,16,0,8"/>
                        <WrapPanel x:Name="PresetColorsPanel">
                            <Button Width="32" 
                                    Height="32" 
                                    Margin="4"
                                    Background="#d4af37"
                                    BorderBrush="#666666"
                                    Click="OnPresetColorClick"/>
                            <Button Width="32" 
                                    Height="32" 
                                    Margin="4"
                                    Background="#4ecdc4"
                                    BorderBrush="#666666"
                                    Click="OnPresetColorClick"/>
                            <Button Width="32" 
                                    Height="32" 
                                    Margin="4"
                                    Background="#ff6b6b"
                                    BorderBrush="#666666"
                                    Click="OnPresetColorClick"/>
                            <Button Width="32" 
                                    Height="32" 
                                    Margin="4"
                                    Background="#95e1d3"
                                    BorderBrush="#666666"
                                    Click="OnPresetColorClick"/>
                            <Button Width="32" 
                                    Height="32" 
                                    Margin="4"
                                    Background="#f38181"
                                    BorderBrush="#666666"
                                    Click="OnPresetColorClick"/>
                            <Button Width="32" 
                                    Height="32" 
                                    Margin="4"
                                    Background="#aa96da"
                                    BorderBrush="#666666"
                                    Click="OnPresetColorClick"/>
                            <Button Width="32" 
                                    Height="32" 
                                    Margin="4"
                                    Background="#fcbad3"
                                    BorderBrush="#666666"
                                    Click="OnPresetColorClick"/>
                            <Button Width="32" 
                                    Height="32" 
                                    Margin="4"
                                    Background="#a8d8ea"
                                    BorderBrush="#666666"
                                    Click="OnPresetColorClick"/>
                        </WrapPanel>
                    </StackPanel>
                </ScrollViewer>
            </ui:TabViewItem>

            <!-- Market Tab -->
            <ui:TabViewItem Header="Market">
                <ScrollViewer VerticalScrollBarVisibility="Auto">
                    <StackPanel Margin="8">
                        <TextBlock Text="Default Data Center"
                                   FontWeight="SemiBold"
                                   Margin="0,8,0,4"
                                   Foreground="#cccccc"/>
                        <ComboBox x:Name="DefaultDataCenterCombo"
                                  Margin="0,0,0,16"
                                  helpers:ComboBoxAutoWidthBehavior.EnableAutoWidth="True">
                            <ComboBoxItem Content="Aether"/>
                            <ComboBoxItem Content="Primal"/>
                            <ComboBoxItem Content="Crystal"/>
                            <ComboBoxItem Content="Dynamis"/>
                            <ComboBoxItem Content="Chaos"/>
                            <ComboBoxItem Content="Light"/>
                            <ComboBoxItem Content="Elemental"/>
                            <ComboBoxItem Content="Gaia"/>
                            <ComboBoxItem Content="Mana"/>
                            <ComboBoxItem Content="Meteor"/>
                        </ComboBox>

                        <ui:ToggleSwitch x:Name="AutoFetchPricesToggle"
                                         Content="Auto-fetch prices on plan build"
                                         Margin="0,8"
                                         ToolTip="Automatically fetch market prices after building a project plan"/>

                        <!-- Include cross-world data toggle (Hidden - Not Implemented) -->
                        <ui:ToggleSwitch x:Name="IncludeCrossWorldToggle"
                                         Content="Include cross-world data"
                                         Margin="0,8"
                                         ToolTip="Include data from all worlds in the data center"
                                         Visibility="Collapsed"/>
                    </StackPanel>
                </ScrollViewer>
            </ui:TabViewItem>

            <!-- Planning Tab -->
            <ui:TabViewItem Header="Planning">
                <ScrollViewer VerticalScrollBarVisibility="Auto">
                    <StackPanel Margin="8">
                        <TextBlock Text="Default Recommendation Mode"
                                   FontWeight="SemiBold"
                                   Margin="0,8,0,4"
                                   Foreground="#cccccc"/>
                        <ComboBox x:Name="DefaultRecommendationModeCombo"
                                  Margin="0,0,0,16"
                                  helpers:ComboBoxAutoWidthBehavior.EnableAutoWidth="True">
                            <ComboBoxItem Content="Minimize Total Cost" ToolTip="Only buy what is needed"/>
                            <ComboBoxItem Content="Maximize Value" ToolTip="Best price per unit, good for frequent crafts"/>
                        </ComboBox>
                    </StackPanel>
                </ScrollViewer>
            </ui:TabViewItem>

            <!-- Live Mode Tab (Hidden - Not Implemented) -->
            <ui:TabViewItem Header="Live Mode" Visibility="Collapsed">
                <ScrollViewer VerticalScrollBarVisibility="Auto">
                    <StackPanel Margin="8">
                        <ui:ToggleSwitch x:Name="AutoElevateToggle"
                                         Content="Auto-elevate on live mode"
                                         Margin="0,8"
                                         ToolTip="Automatically request admin privileges when enabling live mode"/>

                        <ui:ToggleSwitch x:Name="ShowAdminWarningToggle"
                                         Content="Show admin warning"
                                         Margin="0,8"
                                         IsChecked="True"
                                         ToolTip="Show warning about admin privileges when starting live mode"/>
                    </StackPanel>
                </ScrollViewer>
            </ui:TabViewItem>
        </ui:TabView>

        <!-- Buttons -->
        <Grid Grid.Row="2" Margin="0,16,0,0">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*" />
                <ColumnDefinition Width="8" />
                <ColumnDefinition Width="Auto" />
                <ColumnDefinition Width="8" />
                <ColumnDefinition Width="Auto" />
            </Grid.ColumnDefinitions>

            <ui:Button Grid.Column="2"
                       Content="Reset to Defaults"
                       Appearance="Secondary"
                       Click="OnResetDefaults"/>

            <ui:Button Grid.Column="4"
                       Content="Save"
                       Appearance="Primary"
                       Click="OnSave"/>
        </Grid>
    </Grid>
</Window>
