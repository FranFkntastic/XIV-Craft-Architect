<Window x:Class="FFXIV_Craft_Architect.Views.ProjectItemsWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:ui="http://schemas.lepo.co/wpfui/2022/xaml"
        Title="Project Items"
        Width="500"
        Height="600"
        WindowStartupLocation="CenterOwner"
        Background="#1e1e1e"
        ResizeMode="CanResize">

    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto" />
            <RowDefinition Height="Auto" />
            <RowDefinition Height="*" />
            <RowDefinition Height="Auto" />
        </Grid.RowDefinitions>

        <!-- Header -->
        <Border Grid.Row="0" 
                Background="#252525" 
                Padding="12,8">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*" />
                    <ColumnDefinition Width="Auto" />
                </Grid.ColumnDefinitions>
                
                <StackPanel Grid.Column="0">
                    <TextBlock x:Name="PlanNameText"
                               Text="Project Items"
                               FontSize="16"
                               FontWeight="SemiBold"
                               Foreground="#d4af37"/>
                    <TextBlock x:Name="ItemCountText"
                               Text="0 items"
                               FontSize="11"
                               Foreground="#888888"
                               Margin="0,2,0,0"/>
                </StackPanel>
                
                <ui:Button Grid.Column="1"
                           x:Name="AddItemButton"
                           Content="+ Add Item"
                           Click="OnAddItemClick"
                           VerticalAlignment="Center"/>
            </Grid>
        </Border>

        <!-- Toolbar -->
        <Border Grid.Row="1"
                Background="#2a2a2a"
                Padding="8,4"
                BorderBrush="#333333"
                BorderThickness="0,0,0,1">
            <StackPanel Orientation="Horizontal">
                <ui:Button x:Name="ClearAllButton"
                           Content="Clear All"
                           Click="OnClearAllClick"
                           Margin="0,0,8,0"
                           Background="#3d2d2d"/>
                
                <Rectangle Width="1"
                           Margin="4,2"
                           Fill="#444444"/>
                
                <TextBlock Text="Total:"
                           VerticalAlignment="Center"
                           Margin="8,0,4,0"
                           Foreground="#888888"/>
                <TextBlock x:Name="TotalQuantityText"
                           Text="0"
                           VerticalAlignment="Center"
                           Foreground="#cccccc"
                           FontWeight="SemiBold"/>
                
                <TextBlock Text="| HQ Required:"
                           VerticalAlignment="Center"
                           Margin="16,0,4,0"
                           Foreground="#888888"/>
                <TextBlock x:Name="HqCountText"
                           Text="0"
                           VerticalAlignment="Center"
                           Foreground="Gold"
                           FontWeight="SemiBold"/>
            </StackPanel>
        </Border>

        <!-- Items List -->
        <DataGrid Grid.Row="2"
                  x:Name="ItemsDataGrid"
                  AutoGenerateColumns="False"
                  CanUserAddRows="False"
                  CanUserDeleteRows="False"
                  CanUserReorderColumns="False"
                  CanUserResizeColumns="True"
                  CanUserSortColumns="True"
                  GridLinesVisibility="Horizontal"
                  HorizontalGridLinesBrush="#333333"
                  Background="#1e1e1e"
                  RowBackground="#252525"
                  AlternatingRowBackground="#2a2a2a"
                  BorderThickness="0"
                  HeadersVisibility="Column"
                  ColumnHeaderHeight="32"
                  RowHeight="36"
                  SelectionMode="Single"
                  SelectionUnit="FullRow">
            
            <DataGrid.ColumnHeaderStyle>
                <Style TargetType="DataGridColumnHeader">
                    <Setter Property="Background" Value="#2a2a2a"/>
                    <Setter Property="Foreground" Value="#cccccc"/>
                    <Setter Property="FontWeight" Value="SemiBold"/>
                    <Setter Property="Padding" Value="8,4"/>
                    <Setter Property="BorderBrush" Value="#333333"/>
                    <Setter Property="BorderThickness" Value="0,0,1,1"/>
                </Style>
            </DataGrid.ColumnHeaderStyle>
            
            <DataGrid.Columns>
                <!-- Delete Button -->
                <DataGridTemplateColumn Width="40">
                    <DataGridTemplateColumn.CellTemplate>
                        <DataTemplate>
                            <Button Content="Ã—"
                                    Width="24"
                                    Height="24"
                                    FontSize="14"
                                    Foreground="Red"
                                    Background="Transparent"
                                    BorderThickness="0"
                                    Click="OnDeleteItemClick"
                                    ToolTip="Remove item"/>
                        </DataTemplate>
                    </DataGridTemplateColumn.CellTemplate>
                </DataGridTemplateColumn>
                
                <!-- Item Name -->
                <DataGridTextColumn Header="Item"
                                    Binding="{Binding Name}"
                                    Width="*"
                                    IsReadOnly="True">
                    <DataGridTextColumn.ElementStyle>
                        <Style TargetType="TextBlock">
                            <Setter Property="VerticalAlignment" Value="Center"/>
                            <Setter Property="Padding" Value="8,0"/>
                            <Setter Property="Foreground" Value="#ffffff"/>
                        </Style>
                    </DataGridTextColumn.ElementStyle>
                </DataGridTextColumn>
                
                <!-- HQ Checkbox -->
                <DataGridCheckBoxColumn Header="HQ"
                                        Binding="{Binding IsHqRequired, Mode=TwoWay}"
                                        Width="50">
                    <DataGridCheckBoxColumn.ElementStyle>
                        <Style TargetType="CheckBox">
                            <Setter Property="HorizontalAlignment" Value="Center"/>
                            <Setter Property="VerticalAlignment" Value="Center"/>
                        </Style>
                    </DataGridCheckBoxColumn.ElementStyle>
                </DataGridCheckBoxColumn>
                
                <!-- Quantity -->
                <DataGridTextColumn Header="Qty"
                                    Binding="{Binding Quantity, Mode=TwoWay}"
                                    Width="70">
                    <DataGridTextColumn.ElementStyle>
                        <Style TargetType="TextBlock">
                            <Setter Property="HorizontalAlignment" Value="Center"/>
                            <Setter Property="VerticalAlignment" Value="Center"/>
                            <Setter Property="Foreground" Value="#cccccc"/>
                        </Style>
                    </DataGridTextColumn.ElementStyle>
                    <DataGridTextColumn.EditingElementStyle>
                        <Style TargetType="TextBox">
                            <Setter Property="HorizontalAlignment" Value="Center"/>
                            <Setter Property="VerticalAlignment" Value="Center"/>
                            <Setter Property="Background" Value="#333333"/>
                            <Setter Property="Foreground" Value="#ffffff"/>
                            <Setter Property="BorderBrush" Value="#555555"/>
                            <Setter Property="Padding" Value="4,2"/>
                        </Style>
                    </DataGridTextColumn.EditingElementStyle>
                </DataGridTextColumn>
            </DataGrid.Columns>
        </DataGrid>

        <!-- Footer -->
        <Border Grid.Row="3"
                Background="#252525"
                Padding="12,8"
                BorderBrush="#333333"
                BorderThickness="0,1,0,0">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*" />
                    <ColumnDefinition Width="Auto" />
                </Grid.ColumnDefinitions>
                
                <TextBlock Grid.Column="0"
                           Text="Double-click a row to edit. Click column headers to sort."
                           FontSize="11"
                           Foreground="#666666"
                           VerticalAlignment="Center"/>
                
                <ui:Button Grid.Column="1"
                           Content="Close"
                           Click="OnCloseClick"
                           Width="80"/>
            </Grid>
        </Border>
    </Grid>
</Window>
