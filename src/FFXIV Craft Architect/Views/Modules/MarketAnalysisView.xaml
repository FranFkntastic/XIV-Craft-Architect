<UserControl x:Class="FFXIV_Craft_Architect.Views.Modules.MarketAnalysisView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:ui="http://schemas.lepo.co/wpfui/2022/xaml">
    <Border x:Name="MarketAnalysisContent"
            Background="Transparent"
            Padding="8,8,16,16"
            Visibility="Collapsed">
        <Grid>
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto" />
                <RowDefinition Height="Auto" />
                <RowDefinition Height="*" />
            </Grid.RowDefinitions>

            <StackPanel Grid.Row="0"
                        Orientation="Horizontal"
                        Margin="0,0,0,8">
                <TextBlock Text="Market Analysis"
                           FontSize="16"
                           FontWeight="SemiBold"
                           Foreground="{StaticResource Brush.Accent.Primary}"
                           VerticalAlignment="Center"/>

                <ui:Button x:Name="ProcurementRefreshButton"
                           Content="Refresh Prices"
                           Appearance="Secondary"
                           Margin="16,0,0,0"
                           IsEnabled="False"/>

                <ui:Button x:Name="RebuildFromCacheButton"
                           Content="Rebuild from Cache"
                           Appearance="Secondary"
                           Margin="8,0,0,0"
                           IsEnabled="False"
                           ToolTip="Rebuild market analysis using cached prices without calling API"/>
            </StackPanel>

            <Border Grid.Row="1"
                    Background="{StaticResource Brush.Surface.Card}"
                    CornerRadius="4"
                    Padding="12"
                    Margin="0,0,0,8">
                <StackPanel Orientation="Horizontal">
                    <TextBlock Text="Data Center:"
                               Foreground="{StaticResource Brush.Text.Secondary}"
                               VerticalAlignment="Center"
                               Margin="0,0,6,0"/>
                    <ComboBox x:Name="DcCombo"
                              Width="100"
                              IsEditable="False"
                              Margin="0,0,16,0"/>

                    <TextBlock Text="World:"
                               Foreground="{StaticResource Brush.Text.Secondary}"
                               VerticalAlignment="Center"
                               Margin="0,0,6,0"/>
                    <ComboBox x:Name="WorldCombo"
                              Width="120"
                              IsEditable="False"
                              Margin="0,0,24,0"/>

                    <TextBlock Text="Sort by:"
                               Foreground="{StaticResource Brush.Text.Secondary}"
                               VerticalAlignment="Center"
                               Margin="0,0,8,0"/>
                    <ComboBox x:Name="ProcurementSortCombo"
                              Width="170"
                              SelectedIndex="0">
                        <ComboBoxItem Content="Recommended World"/>
                        <ComboBoxItem Content="Alphabetical"/>
                        <ComboBoxItem Content="Price (High to Low)"/>
                    </ComboBox>

                    <TextBlock Text="Mode:"
                               Foreground="{StaticResource Brush.Text.Secondary}"
                               VerticalAlignment="Center"
                               Margin="24,0,8,0"/>
                    <ComboBox x:Name="ProcurementModeCombo"
                              Width="170">
                        <ComboBoxItem Content="Minimize Total Cost"/>
                        <ComboBoxItem Content="Maximize Value"/>
                    </ComboBox>

                    <CheckBox x:Name="ProcurementSearchAllNaCheck"
                              Content="Search all NA DCs"
                              Foreground="{StaticResource Brush.Text.Secondary}"
                              Margin="24,0,0,0"
                              VerticalAlignment="Center"/>
                </StackPanel>
            </Border>

            <Border Grid.Row="2"
                    Background="{StaticResource Brush.Surface.Card}"
                    CornerRadius="4"
                    Padding="12">
                <Grid>
                    <ScrollViewer x:Name="LegacyProcurementScrollViewer"
                                  VerticalScrollBarVisibility="Auto">
                        <StackPanel x:Name="ProcurementPanel">
                            <TextBlock Text="Build a plan to see market analysis"
                                       Foreground="{StaticResource Brush.Text.Secondary}"
                                       HorizontalAlignment="Center"
                                       Margin="0,40"
                                       FontSize="14"/>
                        </StackPanel>
                    </ScrollViewer>

                    <Grid x:Name="SplitPaneMarketView"
                          Visibility="Collapsed">
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="*"/>
                        </Grid.RowDefinitions>

                        <Border x:Name="SplitPaneExpandedPanel"
                                Grid.Row="0"
                                Background="#252525"
                                CornerRadius="4"
                                Margin="0,0,0,8"
                                Visibility="Collapsed"
                                MaxHeight="300">
                            <ScrollViewer VerticalScrollBarVisibility="Auto"
                                          Padding="12">
                                <StackPanel x:Name="SplitPaneExpandedContent">
                                </StackPanel>
                            </ScrollViewer>
                        </Border>

                        <ScrollViewer Grid.Row="1"
                                      VerticalScrollBarVisibility="Auto">
                            <WrapPanel x:Name="SplitPaneCardsGrid"
                                       Orientation="Horizontal"
                                       HorizontalAlignment="Center">
                            </WrapPanel>
                        </ScrollViewer>
                    </Grid>
                </Grid>
            </Border>
        </Grid>
    </Border>
</UserControl>
