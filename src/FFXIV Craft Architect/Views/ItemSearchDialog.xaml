<Window x:Class="FFXIV_Craft_Architect.Views.ItemSearchDialog"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Search Item"
        Width="500"
        Height="400"
        WindowStartupLocation="CenterOwner"
        Background="#1e1e1e">

    <Window.Resources>
        <SolidColorBrush x:Key="GoldAccentBrush" Color="#d4a73a"/>
        <SolidColorBrush x:Key="CardBackgroundBrush" Color="#2d2d2d"/>
        <SolidColorBrush x:Key="TextPrimaryBrush" Color="#ffffff"/>
        <SolidColorBrush x:Key="TextSecondaryBrush" Color="#aaaaaa"/>
    </Window.Resources>

    <Grid Margin="16">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <!-- Header -->
        <TextBlock Grid.Row="0" 
                   Text="Add Item to Plan"
                   FontSize="18"
                   FontWeight="Bold"
                   Foreground="{StaticResource GoldAccentBrush}"
                   Margin="0,0,0,12"/>

        <!-- Search Box -->
        <StackPanel Grid.Row="1" Margin="0,0,0,12">
            <TextBlock Text="Item Name:" 
                       Foreground="{StaticResource TextSecondaryBrush}"
                       Margin="0,0,0,4"/>
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>
                <TextBox x:Name="SearchTextBox"
                         Grid.Column="0"
                         Padding="8"
                         Background="#2d2d2d"
                         Foreground="{StaticResource TextPrimaryBrush}"
                         BorderBrush="#4d4d4d"
                         KeyDown="OnSearchKeyDown"/>
                <Button Grid.Column="1"
                        Content="Search"
                        Padding="16,8"
                        Margin="8,0,0,0"
                        Background="{StaticResource GoldAccentBrush}"
                        Foreground="#1a1a1a"
                        FontWeight="SemiBold"
                        BorderThickness="0"
                        Click="OnSearch"/>
            </Grid>
        </StackPanel>

        <!-- Results -->
        <Border Grid.Row="2" 
                Background="{StaticResource CardBackgroundBrush}"
                CornerRadius="4"
                Padding="8">
            <Grid>
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="*"/>
                </Grid.RowDefinitions>
                
                <TextBlock Grid.Row="0"
                           Text="Search Results"
                           FontWeight="SemiBold"
                           Foreground="{StaticResource GoldAccentBrush}"
                           Margin="0,0,0,8"/>
                
                <ListBox Grid.Row="1"
                         x:Name="ResultsListBox"
                         Background="Transparent"
                         BorderThickness="0"
                         SelectionChanged="OnSelectionChanged">
                    <ListBox.ItemTemplate>
                        <DataTemplate>
                            <Grid Margin="0,4">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="40"/>
                                    <ColumnDefinition Width="*"/>
                                </Grid.ColumnDefinitions>
                                <Image Grid.Column="0"
                                       Source="{Binding IconUrl}"
                                       Width="32"
                                       Height="32"/>
                                <TextBlock Grid.Column="1"
                                           Text="{Binding Name}"
                                           VerticalAlignment="Center"
                                           Margin="8,0,0,0"
                                           Foreground="{StaticResource TextPrimaryBrush}"/>
                            </Grid>
                        </DataTemplate>
                    </ListBox.ItemTemplate>
                </ListBox>
            </Grid>
        </Border>

        <!-- Buttons -->
        <StackPanel Grid.Row="3" 
                    Orientation="Horizontal"
                    HorizontalAlignment="Right"
                    Margin="0,16,0,0">
            <Button Content="Add Selected"
                    Padding="16,8"
                    Margin="0,0,8,0"
                    Background="{StaticResource GoldAccentBrush}"
                    Foreground="#1a1a1a"
                    FontWeight="SemiBold"
                    BorderThickness="0"
                    Click="OnAddSelected"
                    IsEnabled="False"
                    x:Name="AddButton"/>
            <Button Content="Cancel"
                    Padding="16,8"
                    Background="Transparent"
                    Foreground="{StaticResource TextSecondaryBrush}"
                    BorderBrush="{StaticResource TextSecondaryBrush}"
                    BorderThickness="1"
                    Click="OnCancel"/>
        </StackPanel>
    </Grid>
</Window>
